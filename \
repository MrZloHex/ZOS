.DEF 	SET_BX
		MIH 0x80
		MIL 0x00
		M$1M
.ENDDEF
.DEF 	SET_X
		MIH 0xF0
		MIL 0x02
		M$1M
.ENDDEF

.DEF 	SET_BY
		MIH 0x80
		MIL 0x01
		M$1M
.ENDDEF
.DEF 	SET_Y
		MIH 0xF0
		MIL 0x03
		M$1M
.ENDDEF

.DEF 	PUTCHAR
		MIH 0xF0
		MIL 0x04
		M$1M
.ENDDEF

SECTION TEXT

	; A - char
	; B - X pos
	; C - Y pos
putchar:	SET_X(B)
		SET_Y(C)
		PUTCHAR(A)
		
		RET


	; AB - ptr to null term str
	; D  - start X pos
	; C  - start Y pos
putstr: 	PUE	

_loop_putstr:	MMA
		PUA
		PUB
		PUH
		PUL

	; Check if char isn't NULL
		MIB NULL
		CPB
		LEA(_exit_putstr)
		JSZ
		
		POB
		POA
		CALL(inc_address, _char_putstr)
_char_putstr:	MAH
		MBL
		POB
		POA
		CALL(putchar, _inc_putstr)

_inc_putstr:	MBA
		MID 1
		ADD
		MAB
		LEA(_loop_putstr)
		JMP
		
_exit_putstr:	POL
		POH
		LOAD_REG
		RET

END
